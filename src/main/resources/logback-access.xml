<?xml version="1.0" encoding="UTF-8"?>
<configuration>
    <property resource="application.properties" />
    <appender name="AccessLog" class="ch.qos.logback.core.rolling.RollingFileAppender">
        <append>true</append>
        <file>./logs/localhost_access_log.cloud.current.txt</file>
        <rollingPolicy class="ch.qos.logback.core.rolling.FixedWindowRollingPolicy">
            <fileNamePattern>/root/logs/localhost_access_log.cloud.%i.txt</fileNamePattern>
            <minIndex>1</minIndex>
            <maxIndex>5</maxIndex>
        </rollingPolicy>

        <triggeringPolicy class="ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy">
            <maxFileSize>20MB</maxFileSize>
        </triggeringPolicy>

        <encoder>
            <charset>utf-8</charset>
            <pattern>{&quot;timestamp&quot;: &quot;%t{yyyy-MM-dd'T'HH:mm:ss.SSSZ}&quot;, &quot;responseCode&quot;: &quot;%s&quot;, &quot;request&quot;: &quot;%r&quot;, &quot;responseTime&quot;: &quot;%D&quot;, &quot;requestMethod&quot;: &quot;%m&quot;, &quot;service&quot;: &quot;${NAME}&quot;, &quot;environment&quot;: &quot;${env}&quot;, &quot;customer&quot;: &quot;OPH&quot;, &quot;user-agent&quot;: &quot;%i{User-Agent}&quot;, &quot;caller-id&quot;: &quot;%i{Caller-Id}&quot;, &quot;clientSubSystemCode&quot;: &quot;%i{clientSubSystemCode}&quot;, &quot;x-forwarded-for&quot;: &quot;%i{X-Forwarded-For}&quot;, &quot;x-real-ip&quot;: &quot;%i{X-Real-IP}&quot;, &quot;remote-ip&quot;: &quot;%a&quot;, &quot;session&quot;: &quot;%reqCookie{JSESSIONID}&quot;, &quot;response-size&quot;: &quot;%B&quot;, &quot;referer&quot;: &quot;%i{Referer}&quot;, &quot;opintopolku-api-key&quot;: &quot;%i{Opintopolku-Api-Key}&quot;}
            </pattern>
        </encoder>
    </appender>

    <appender-ref ref="AccessLog"/>
</configuration>
